{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<div class="py-4">
    <div class="d-flex justify-content-between w-100 flex-wrap">
        <div class="mb-3 mb-lg-0">
            <h1 class="h4">SafetyBase</h1>
            <p class="mb-0">Health and Safety Representative toolbox for keeping records.</p>
        </div>
        <div>
            <a href={{ url_for('authentication_blueprint.logout') }} class="btn btn-outline-gray-600 d-inline-flex align-items-center">
                <svg class="icon icon-xxs me-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                Logout
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
        <div class="card border-0 shadow">
            <a href={{ url_for('home_blueprint.view_prestarts') }} class="nav-link">
                <div class="card-body">
                    <div class="row d-block d-xl-flex align-items-center">
                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                            <div class="icon-shape icon-shape-secondary rounded me-4 me-sm-0">
                                <img src="/static/assets/img/icons/tape-svgrepo.svg" height="40" width="40" alt="Tape Measure">
                            </div>
                            <div class="d-sm-none">
                                <h2 class="h5">Safety checklist</h2>
                                <h3 class="fw-extrabold mb-1">Pre-Start</h3>
                            </div>
                        </div>
                        <div class="col-12 col-xl-7 px-xl-0">
                            <div class="d-none d-sm-block">
                                <h2 class="h6 text-gray-400 mb-0">Safety checklist</h2>
                                <h3 class="fw-extrabold mb-2">Pre-Start</h3>
                            </div>
                            <div class="small d-flex mt-1">
                                Before undertaking hazardous work.
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
        <div class="card border-0 shadow">
            <a href="training" class="nav-link">
                <div class="card-body">
                    <div class="row d-block d-xl-flex align-items-center">
                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                            <div class="icon-shape-primary icon-shape rounded me-4 me-sm-0">
                                <img class="navbar-brand-dark" src="/static/assets/img/icons/wheelbarrow-svgrepo.svg" alt="cement logo" />
                                <!-- <svg class="icon icon-md text-secondary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px"><path fill="#FF5722" d="M32,15v28H10c-2.2,0-4-1.8-4-4V15H32z" /><path fill="#FFCCBC" d="M14,5v34c0,2.2-1.8,4-4,4h29c2.2,0,4-1.8,4-4V5H14z" /><path fill="#FF5722" d="M20 10H38V14H20zM20 17H28V19H20zM30 17H38V19H30zM20 21H28V23H20zM30 21H38V23H30zM20 25H28V27H20zM30 25H38V27H30zM20 29H28V31H20zM30 29H38V31H30zM20 33H28V35H20zM30 33H38V35H30zM20 37H28V39H20zM30 37H38V39H30z" /></svg> -->
                            </div>
                            <div class="d-sm-none">
                                <h2 class="fw-extrabold h5">Education</h2>
                                <h3 class="mb-1">Training</h3>
                            </div>
                        </div>
                        <div class="col-12 col-xl-7 px-xl-0">
                            <div class="d-none d-sm-block">
                                <h2 class="h6 text-gray-400 mb-0">Education</h2>
                                <h3 class="fw-extrabold mb-2">Training</h3>
                            </div>
                            <div class="small d-flex mt-1">
                                Keep training records up to date.
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-12 col-sm-6 col-xl-4 mb-4">
        <div class="card border-0 shadow">
            <a href="reports" class="nav-link">
                <div class="card-body">
                    <div class="row d-block d-xl-flex align-items-center">
                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                            <div class="icon-shape icon-shape-secondary rounded me-4 me-sm-0">
                                <svg fill="#000000" height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 480 480" xml:space="preserve">
                                <g>
                                <g>
                                <g>
                                <path d="M89.825,404.211c-9.926,0-17.965,8.039-17.965,17.965c0,9.917,8.039,17.965,17.965,17.965c9.926,0,17.965-8.048,17.965-17.965C107.789,412.25,99.75,404.211,89.825,404.211z" />
                                <path d="M404.211,404.211c-9.926,0-17.965,8.039-17.965,17.965c0,9.917,8.039,17.965,17.965,17.965c9.926,0,17.965-8.048,17.965-17.965C422.175,412.25,414.136,404.211,404.211,404.211z" />
                                <path d="M504.166,257.395h0.009l-78.049-85.863c-5.695-6.261-13.815-9.845-22.268-9.845h-44.562v107.789h151.444C509.484,265.039,507.337,260.871,504.166,257.395z" />
                                <path d="M449.123,314.386H512v-26.947H356.774c-8.515,0-15.441-6.925-15.441-15.441V161.684h-20.211c-13.626,0-24.702,11.075-24.702,24.702v110.745l-36.945-67.737l18.639-65.249c0.898-3.126,0.018-6.503-2.291-8.812l-53.895-53.895c-0.979-0.979-2.183-1.725-3.512-2.165l-43.475-14.498l-46.08,124.066c-3.8-1.374-7.833-2.246-12.09-2.246c-2.219,0-4.383,0.269-6.494,0.656l47.607-128.162l-20.309-6.764c-1.689-0.575-3.503-0.62-5.201-0.153l-41.4,11.291l24.612-43.08
                                                        c1.59-2.776,1.581-6.189-0.027-8.964c-1.608-2.776-4.572-4.473-7.77-4.473H8.982C4.015,26.947,0,30.963,0,35.93v161.684v125.754
                                                        v8.982v77.096c0,11.974,9.737,21.711,21.711,21.711h5.955c4.383,30.415,30.549,53.895,62.159,53.895
                                                        c31.609,0,57.775-23.48,62.159-53.895h190.069c4.383,30.415,30.549,53.895,62.159,53.895c31.609,0,57.775-23.48,62.159-53.895
                                                        h23.92c11.974,0,21.711-9.737,21.711-21.711v-77.096h-62.877c-4.967,0-8.982-4.015-8.982-8.982
                                                        C440.14,318.401,444.156,314.386,449.123,314.386z M35.93,323.368H17.965v-97.729L35.93,250.79V323.368z M33.567,99.121
                                                        c-2.991,0.817-5.345,3.117-6.243,6.09l-9.36,31.196V44.912h74.339L66.461,90.157L33.567,99.121z M80.842,279.848v43.52H53.895
                                                        v-53.32L80.842,279.848z M89.825,467.088c-24.765,0-44.912-20.148-44.912-44.912c0-24.765,20.148-44.912,44.912-44.912
                                                        c24.765,0,44.912,20.148,44.912,44.912C134.737,446.94,114.589,467.088,89.825,467.088z M134.737,293.16v30.208h-35.93v-49.808
                                                        v-31.034c0-9.908,8.057-17.965,17.965-17.965s17.965,8.057,17.965,17.965V293.16z M152.702,323.368v-17.965
                                                        c0.332,0,0.656-0.018,0.988-0.054l80.842-8.982c3.629-0.404,6.647-2.955,7.653-6.467l10.258-35.894l37.834,69.362H152.702z
                                                         M449.123,422.175c0,24.765-20.148,44.912-44.912,44.912c-24.765,0-44.912-20.148-44.912-44.912
                                                        c0-24.765,20.148-44.912,44.912-44.912C428.975,377.263,449.123,397.411,449.123,422.175z" />
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="d-sm-none">
                                <h2 class="fw-extrabold h5">Reporting</h2>
                                <h3 class="mb-1">Forms</h3>
                            </div>
                        </div>
                        <div class="col-12 col-xl-7 px-xl-0">
                            <div class="d-none d-sm-block">
                                <h2 class="h6 text-gray-400 mb-0">Reporting</h2>
                                <h3 class="fw-extrabold mb-2">Forms</h3>
                            </div>
                            <div class="small d-flex mt-1">
                                Report incidents and accidents.
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-12 mb-4">
        <div class="card bg-yellow-100 border-0 shadow">
            <div class="card-header d-sm-flex flex-row align-items-center flex-0">
                <div class="d-block mb-3 mb-sm-0">
                    <div class="fs-5 fw-normal mb-2">Reminders</div>
                    <h2 class="fs-3 fw-extrabold">Important Tasks</h2>
                    <div class="small mt-2">
                        <span class="fw-normal me-2">{{ num_tasks }} tasks in total. </span>
                        <span class="text-success fw-bold">{{ num_active }} active task.</span>
                    </div>
                </div>
                <div class="d-flex ms-auto">
                    <!-- Tabs navs -->
                    <ul class="nav mb-4 pb-2" id="taskfilter" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link btn btn-secondary text-dark btn-sm me-2 active" id="activetasks-tab" data-bs-toggle="tab" data-bs-target="#active-tasks"
                                    type="button" role="tab" aria-controls="activetasks" aria-selected="true">
                                Active tasks
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link btn btn-dark btn-sm me-3" id="alltasks-tab" data-bs-toggle="tab" data-bs-target="#all-tasks"
                                    type="button" role="tab" aria-controls="alltasks" aria-selected="false">
                                All tasks
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body p-2">
                <form action={{ url_for('.view_tasks') }} method="post">
                    <div class="row mb-4">
                        <div class="input-group date" aria-describedby="task-input">
                            <input name="task" type="text" class="form-control" placeholder="New task..." required>
                            <span class="input-group-text">
                                <svg class="icon icon-xs text-gray-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                            </span>
                            <input name="due_date" class="form-control" type="text" id="datepicker" data-date-format="dd/mm/yyyy" readonly />
                            <button class="btn btn-outline-tertiary">Add</button>
                        </div>
                    </div>
                </form>
                <!-- Tabs content -->
                <div class="tab-content" id="taskfilter-content" aria-labelledby="taskfilter">
                    <!-- Active tasks -->
                    <div class="tab-pane fade show active" id="active-tasks" role="tabpanel" aria-labelledby="activetasks-tab">
                        <form action={{ url_for('.edit_tasks') }} method="post">
                            <ul class="list-group mb-0">
                                {% for task in tasks if not task.complete %}
                                <li class="list-group-item d-flex align-items-center border-0 mb-0 rounded"
                                    style="background-color: #f4f6f7;">
                                    <div class="form-check">
                                        <input class="form-check-input me-2" type="checkbox" aria-label="..." value={{ task.id }} name="ct" />
                                        {{ task }}
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                            <div class="card-footer px-3 border-0 d-flex flex-column flex-lg-row">
                                <button class="btn btn-lg btn-outline-success">Complete tasks</button>
                            </div>
                        </form>
                    </div>
                    <!-- All tasks, active and completed -->
                    <div class="tab-pane fade" id="all-tasks" role="tabpanel" aria-labelledby="alltasks-tab">
                        <form action={{ url_for('.delete_tasks') }} method="post">
                            <ul class="list-group mb-0">
                                {% for task in tasks %}
                                <li class="list-group-item d-flex align-items-center border-0 mb-0 rounded"
                                    style="background-color: #f4f6f7;">
                                    {% if task.complete %}
                                    <input class="form-check-input me-2" type="checkbox" aria-label="..." value={{ task.id }} name="dt" />
                                    <s>{{ task }}</s>
                                    {% else %}
                                    <input class="form-check-input me-2" type="checkbox" aria-label="..." disabled />
                                    {{ task }}
                                    {% endif %}
                                </li>
                                {% endfor %}
                            </ul>
                            <div class="card-footer px-3 border-0 d-flex flex-column flex-lg-row">
                                <button class="btn btn-lg btn-tertiary">Delete tasks</button>
                            </div>
                        </form>
                    </div>
                    <!-- End Tabs content -->
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->
    {% block javascripts %}

<script>
    $(function () {
        $("#datepicker").datepicker({
            autoclose: true,
            todayHighlight: true,
            todayBtn: "linked",
            title: "Bootstrap datepicker"
        }).datepicker('update', new Date());
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"
        integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw=="></script>

{% endblock javascripts %}
